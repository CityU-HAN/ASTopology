print "*** valid-ebgp-3-routers ***\n"

bgp options msg-monitor "valid-ebgp-3-routers.msg"

bgp topology load "valid-ebgp-3-routers.topo"

bgp router 0.1.0.0 add network 0.1/16
bgp router 0.2.0.0 add network 0.2/16
bgp router 0.3.0.0 add network 0.3/16

bgp router 0.1.0.0
	peer 0.2.0.0
		filter in
			add-rule
				match "prefix is 0.3/16"
				action "local-pref 100"

bgp router 0.1.0.0
	peer 0.3.0.0
		filter in
			add-rule
				match "prefix is 0.2/16"
				action "local-pref 100"

bgp topology run

sim run

print "RIB of 0.1.0.0\n"
bgp router 0.1.0.0 show rib *
print "RIB of 0.2.0.0\n"
bgp router 0.2.0.0 show rib *
print "RIB of 0.3.0.0\n"
bgp router 0.3.0.0 show rib *
print "Done.\n"
